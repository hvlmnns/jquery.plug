/**

    Plug.js
    A Javascript plugin manager
    Version: 1.0.0 2016-03-21
    author: Stefan HÃ¶velmanns
    sayhello@hvlmnns.de
    The MIT License (MIT)
    Copyright (c) 2016 hvlmnns
    

    Todo: none
    
**/


!function(a,b,c,d){if("object"==typeof a&&"object"==typeof a.exports){var e=function(){};e=b.document?d(b,c):function(a){return a.document||console.warn("plug.js -> plug requires a window with a document!"),d(a,c)},a.exports=e}else d(b,c)}("undefined"!=typeof module?module:this,"undefined"!=typeof window?window:this,"undefined"!=typeof jQuery?jQuery:!1,function(a,b){a.plug=function(c){"undefined"==typeof c&&console.warn("plug.js -> you need to pass a definition!");var d=c.name,e=a.plug["private"].register(c);a[d]=e,Node.prototype[d]=e,b&&(b.fn[d]=e)},plug.configs={},plug.list={},plug["private"]={},plug.me=!1,plug["private"].register=function(a){var b=new plug["private"].socket(a);return new plug["private"].instance(b)},plug["private"].socket=function(a,b){return b||(b={}),b=plug["private"].socket["private"](b),b=plug["private"].socket.extend(b,a),b=plug["private"].socket.require(b,a),b=plug["private"].helpers.transfer(b,a),b=plug["private"].socket.definition(b,a),b=plug["private"].socket.wrapMethods(b),plug.list[b.name]=b,b},plug["private"].socket["private"]=function(a){return a["private"]={},a},plug["private"].socket.extend=function(a,b){if("undefined"!=typeof b["extends"]){var c=plug.list[b["extends"]];if("undefined"!=typeof c)return plug["private"].required=c.name,c;console.warn("plug.js -> "+b.name+": cannot extend from "+b.extend+", because it's not defined!")}return a},plug["private"].socket.require=function(a,b){if(b.required=[],"undefined"!=typeof b.require){var c=b.require;if(b.required="object"==typeof c?c:"__string__","__string__"==b.required){var d=/\s/.test(c),e=/,/.test(c);d?b.required=c.split(" "):e?b.required=c.split(","):b.required=[c]}}plug["private"].required&&(b.required.push(plug["private"].required),delete plug["private"].required);for(var f in b.required)if(b.required.hasOwnProperty(f)){f=b.required[f];var g=plug.list[f];"undefined"==typeof g&&console.warn("plug.js -> "+b.name+": requires "+f+"!")}return a},plug["private"].socket.definition=function(a,b){return a["private"].definition=b,a},plug["private"].socket.wrapMethods=function(a){for(var b in a)a.hasOwnProperty(b)&&(a=plug["private"].socket.updateMethod(a,b));return a},plug["private"].socket.updateMethod=function(a,b){return"function"==typeof a[b]&&(a[b]=function(){var c=a[b].plugFunctionCache||a[b],d=function(){plug.me=this,plug.event.add(a.name+"/"+b+"/before",plug.me);var d=c.apply(plug.me,arguments);return plug.event.add(a.name+"/"+b+"/after",plug.me),d};return d.plugFunctionCache=c,d}()),a},plug["private"].socket.register=function(a){return plug.list[a.name]=a,a},plug["private"].instance=function(a){return function(){var b=plug["private"].instance.create(a);return b=plug["private"].instance.getFunctions(b,a),b=plug["private"].instance.getElements(b,this,arguments),b=plug["private"].instance.guid(b),plug["private"].instance["function"].apply(b,arguments)}},plug["private"].instance["function"]=function(){var a=this;if(plug["private"].instance.applyArguments(a,arguments),a.__private["return"]=!1,a.__private.elements){for(var c in a.__private.elements)if(a.__private.elements.hasOwnProperty(c)){var d=plug["private"].helpers.copy(a);d.el=d.__private.elements[c],b&&(d.$el=b(d.__private.elements[c]),d.$el.context=document),plug["private"].instance.dataAttributes(d,"config"),plug["private"].instance.applyConfig(d),plug["private"].instance.dataAttributes(d),plug["private"].instance.applyOpts(d),plug["private"].instance.applyGuid(d),d.__private["return"]=plug["private"].instance.execute(d)}}else a.__private["return"]=plug["private"].instance.execute(a);for(var e in arguments)arguments.hasOwnProperty(e)&&(e=arguments[e],"function"==typeof e&&e());return a.__private["return"]},plug["private"].instance.execute=function(a){return"function"==typeof a[a.__private.callee]?(a.__private["return"]=a[a.__private.callee].apply(a,arguments),"undefined"!=typeof a.__private["return"]?a.__private["return"]:a.__private.originalElements?a.__private.originalElements:a):(console.warn("plug.js -> "+a.name+" has no "+a.__private.callee+" method!"),a)},plug["private"].instance.create=function(a){var b=JSON.parse(JSON.stringify(a));return b.__private={},b},plug["private"].instance.getFunctions=function(a,b){for(var c in b)if(b.hasOwnProperty(c)){var d=b[c];"function"==typeof d&&(a[c]=b[c])}return a},plug["private"].instance.getElements=function(a,c,d){var e=!1,f=[];for(var g in d)d.hasOwnProperty(g)&&(g=d[g],g instanceof Node?(e=[g],a.__private.originalElements=g):"undefined"!=typeof g.context&&(b&&(b.each(c,function(a,b){f.push(b)}),e=f),a.__private.originalElements=g));return e||(c instanceof Window||c instanceof Node?(e=[c],a.__private.originalElements=c):"undefined"!=typeof c.context&&(b&&(b.each(c,function(a,b){f.push(b)}),e=f),a.__private.originalElements=c)),a.__private.elements=e,a},plug["private"].instance.guid=function(a){function b(a,c){return c=c||"",c+=Math.floor(65536*(1+Math.random())).toString(16).substring(1),0!=a?(a--,b(a,c)):c}return a.guid=b(5),a},plug["private"].instance.applyArguments=function(a,b){a.__private.callee="init";for(var c in b)if(b.hasOwnProperty(c)){var c=b[c];"object"==typeof c&&(a.opts=plug["private"].helpers.transfer(a.opts,c)),"string"==typeof c&&(a.__private.callee=c)}},plug["private"].instance.dataAttributes=function(a,b){var c=a.name.toLowerCase().replace(/-/gi,""),d=a.el.dataset;if(d){var e={};for(var f in d)if(d.hasOwnProperty(f)){var g=d[f],h=f.toLowerCase().substr(0,c.length)==c;if(h){var i=f.substr(c.length).replace(/([A-Z])/g,".$1").toLowerCase().slice(1).split(".");""!=i[0]&&(b&&i[0]==b?plug["private"].instance.deepCreateFromArray(e,i,g):plug["private"].instance.deepCreateFromArray(e,i,g))}}a.opts=plug["private"].helpers.transfer(a.opts,e)}return a},plug["private"].instance.deepCreateFromArray=function(a,b,c,d){return"undefined"==typeof d&&(d=0),"undefined"==typeof a&&(a={}),"object"!=typeof a[b[d]]&&(a[b[d]]={}),"undefined"!=typeof b[d+1]?a=plug["private"].instance.deepCreateFromArray(a[b[d]],b,c,d+1):(a[b[d]]=c,a)},plug["private"].instance.applyConfig=function(a){if("undefined"!=typeof a.opts&&"string"==typeof a.opts.config){"undefined"==typeof plug.configs&&(plug.configs={});var b=plug.configs[a.name][a.opts.config];"undefined"!=typeof b?a.opts=plug["private"].helpers.transfer(a.opts,b):console.warn("plug.js -> can't find the config '"+a.opts.config+"' for the plugin '"+a.name+"'")}return a},plug["private"].instance.applyOpts=function(a){return"undefined"!=typeof a.opts&&"undefined"!=typeof a.opts.opts&&(a.opts=plug["private"].helpers.transfer(a.opts,a.opts.opts),delete a.opts.opts),a},plug["private"].instance.applyGuid=function(a){return a.el.plug=a.el.plug||{},a.el.plug[a.name]=a.el.plug[a.name]||{},a.el.plug[a.name].guid=a.el.plug[a.name].guid||plug["private"].instance.guid(a).guid,a.guid=a.el.plug[a.name].guid,a},plug.event={},plug.event.list={},plug["private"].event={},plug.event.add=function(a,b){var c=plug["private"].event.getPath(a);plug["private"].event.assign(plug.event.list,c,{},0);var d=plug["private"].event.getListeners(c,plug.event.list),e=plug["private"].event.flatten(d);for(var f in e)e.hasOwnProperty(f)&&e[f].apply(b);return b},plug.event.listen=function(a,b){var c=plug["private"].event.getPath(a);plug["private"].event.assign(plug.event.list,c,b,0)},plug.event.remove=function(a){var b=plug["private"].event.getPath(a);plug["private"].event.assign(plug.event.list,b,!1,0,!0),plug["private"].event.assign(plug.event.list,b,{},0)},plug["private"].event.getPath=function(a){var b=a.split(".");return b},plug["private"].event.assign=function(a,b,c,d,e){"object"!=typeof a[b[d]]&&(a[b[d]]=[]),void 0!=b[d+1]?plug["private"].event.assign(a[b[d]],b,c,d+1,e):e?delete a[b[d]]:"function"==typeof c&&a[b[d]].push(c)},plug["private"].event.flatten=function(a,b){"undefined"==typeof b&&(b=[]);for(var c in a)a.hasOwnProperty(c)&&("function"==typeof a[c]&&b.push(a[c]),"object"==typeof a[c]&&plug["private"].event.flatten(a[c],b));return b},plug["private"].event.getListeners=function(a,b){var c=a[0];return a.length>0&&(a.shift(),b=plug["private"].event.getListeners(a,b[c])),b},plug["private"].modify={},plug["delete"]=function(a){delete window[a],delete Node.prototype[a],b&&delete b.fn[a],delete plug[a]},plug.copy=function(a,b){var c=plug.list[a];"undefined"!=typeof c?(c.name=b,plug(c)):console.warn("plug.js -> can't copy "+a+" because it doesn't exist!")},plug.config=function(a,b,c){plug.configs[a]=plug.configs[a]||{},"object"!=typeof c&&console.warn("plug.js -> config must be type of object!"),plug.configs[a][b]=c},plug.before=function(a,b,c){plug["private"].modify("before",a,b,c)},plug.replace=function(a,b,c){plug["private"].modify("replace",a,b,c)},plug.after=function(a,b,c){plug["private"].modify("after",a,b,c)},plug["private"].modify=function(a,b,c,d){var e=plug.list[b];if("undefined"!=typeof e){var f=e[c];"undefined"!=typeof f?("before"==a&&(plug.list[b][c].plugFunctionCache=function(){return d.apply(this,arguments),f.apply(this,arguments)}),"replace"==a&&(plug.list[b][c].plugFunctionCache=function(){return d.apply(this,arguments)}),"after"==a&&(plug.list[b][c].plugFunctionCache=function(){return f.apply(this,arguments),d.apply(this,arguments)}),plug.list[b]=plug["private"].socket.updateMethod(plug.list[b],c)):console.warn("plug.js -> "+b+": cannot "+a+" the method "+c+" because it doesn't exist!")}else console.warn("plug.js -> cannot modify the plugin "+b+" because it doesn't exist!")},plug["private"].helpers={},plug["private"].helpers.transfer=function(a,b){var c=plug["private"].helpers.copy(a);for(var d in b)if(b.hasOwnProperty(d)){var e=plug["private"].helpers.parseToVal(b[d]),f=plug["private"].helpers.keys(a);i=d;for(var g in f){var h=f[g];if(h.toLowerCase()==d)var i=h}"undefined"==typeof c[i]?c[i]=e:c[i]&&"object"==typeof c[i]?c[i]instanceof Node?c[i]=e:c[i]=plug["private"].helpers.transfer(c[i],e):c[i]=e}return c},plug["private"].helpers.parseToVal=function(a){return"string"==typeof a&&""!==a&&("true"===a?a=!0:"false"===a?a=!1:/\,/.test(a)?"["==a[0]&&(a=a.replace("/^[/",""),a=a.replace("/]$/",""),a=a.split(",")):/\[|\]/.test(a)||/[a-zA-Z]/.test(a)||!/[0-9]/.test(a)?"{"===a[0]&&"}"===a[a.length-1]&&(a=plug["private"].helpers.parseJson(a)):a=/\./.test(a)?parseFloat(a):parseInt(a)),a},plug["private"].helpers.keys=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b},plug["private"].helpers.copy=function(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b},plug["private"].helpers.parseJson=function(a){return b?b.parseJSON(a):window.JSON&&window.JSON.parse?window.JSON.parse(a+""):"this device cannot parse json"}});
//# sourceMappingURL=plug.min.js.map